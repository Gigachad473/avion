<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <!-- Include Bootstrap CSS -->
<link rel="stylesheet" href="css/login.css">
<link rel="stylesheet" href="css/style.css"></head>
<link href="assets/css/fontawesome.css" rel="stylesheet">
<link href="assets/css/brands.css" rel="stylesheet">
<link href="assets/css/solid.css" rel="stylesheet">
<body>
    <div class="container">
        <div class="title">Login</div>
        <form action="/login" method="POST" id="loginForm">
          <div class="user__details">
            <p class="error"></p>
            <div class="input__box">
              <span class="details">Email</span>
              <input type="email" placeholder="johnsmith@hotmail.com" id="email" name="email" required>
            </div>
            <div class="input__box">
              <!-- <span class="details">Password</span>
              <input type="password" placeholder="********" required id="password" name="password"> -->
              <input type="password" name="password" autocomplete="current-password" required="" id="password" placeholder="********">
              <i ></i>
              <i class="far fa-eye" id="togglePassword" style="margin-left: -40px; cursor: pointer;position: absolute;margin-top: 15px;"></i>
            </div>
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="rememberMe" name="rememberMe">
                <label class="form-check-label" for="rememberMe">Remember Me</label>
            </div>
      
          </div>
          <p href="/login">Dont have an account? <a href="/register">Register</a></p>

          <div class="button">
            <button>
                Sign up
                <div class="arrow-wrapper">
                    <div class="arrow"></div>
            
                </div>
            </button>
          </div>
        </form>
      </div>
      <script>

        document.addEventListener('DOMContentLoaded', function () {
          const togglePassword = document.querySelector('#togglePassword');
  const password = document.querySelector('#password');

  togglePassword.addEventListener('click', function (e) {
    // toggle the type attribute
    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
    password.setAttribute('type', type);
    // toggle the eye slash icon
    this.classList.toggle('fa-eye-slash');
    this.classList.toggle('fa-eye');

});
  const form = document.getElementById('loginForm');

  form.addEventListener('submit', function (e) {
    e.preventDefault(); // Prevent the default form submission

    // Get form data
    const formData = new FormData(form);

    fetch('/login', {
      method: 'POST',
      body: formData,
    })
      .then((response) => {
        console.log(response)
        // Check the status code of the response
if(response.status === 405) {
  document.querySelector(".error").innerHTML = "User Not Found"
  document.querySelector(".error").style.color = "red"

}
if(response.status === 500) {
  document.querySelector(".error").innerHTML = "Server Error"
  document.querySelector(".error").style.color = "red"

}
      })
      .catch((error) => {
        // Handle network errors or other exceptions
        console.error('Error:', error);
      });
  });
});


      </script>
</body>
</html>
