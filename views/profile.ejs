<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <!-- Include Bootstrap CSS or your preferred CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
    <style>

a {
  color: #28acd7;
  text-decoration: none;
}

.my_account_orders {
  border-collapse: collapse;
  border-spacing: 0;
  width: 100%;
}

.my_account_orders th {
  text-align: left;
}

tr {
  border-bottom: 1px solid #ccc;
}

th,
td {
  padding: 6px;
}

@media 
only screen and (max-width: 600px) {
  /* Force table to not be like tables anymore */
	table, thead, tbody, th, td, tr { 
		display: block; 
	}
  
  /* Hide table headers (but not display: none;, for accessibility) */
	thead tr { 
		position: absolute;
		top: -9999px;
		left: -9999px;
	}
  
  td { 
		/* Behave  like a "row" */
		border: none;
		border-bottom: 1px solid #eee; 
		position: relative;
		padding-left: 35%; 
	}
  
  td:last-child { 
		 border-width: 0;
	}
  
  td:before { 
     content: attr(data-title);
     color: #ccc;
		/* Now like a table header */
		position: absolute;
		/* Top/left values mimic padding */
		top: 6px;
		left: 6px;
		width: 45%; 
		padding-right: 10px; 
		white-space: nowrap;
	}
}
    </style>
</head>
<body>
  <h1>Welcome, <%= email %>!</h1>
  <h2>Your Orders:</h2>
  <table class="shop_table my_account_orders">

    <thead>
      <tr>
        <th class="order-id">ID</th>

        <th class="order-date">Products</th>
        <th class="order-status">Total</th>
        <th class="order-total">Date</th>
      </tr>
    </thead>
  
    <tbody>
      <% let rowNumber = 1; %>

      <% orders.forEach(order => { %>

      <tr class="order">
        <td class="order-number" data-title="ID">
          <%= rowNumber %>
        </td>
        <td class="order-actions" data-title="Products">
          <%= order.cartData %>
        </td>

  
        <td class="order-total" data-title="Total">
          <span class="amount">$<%= order.total %></span>
        </td>
        <td class="order-date" data-title="Date">
          <time datetime="2014-06-12" title="1402562157"><%= order.order_date %></time>
        </td>

      </tr>
      <% rowNumber++; %>

      <% }); %>

    </tbody>
  </table>
  <a href="/logout">Logout</a>
  
    <!-- Include any additional content or functionality as needed -->
    <!-- Add this JavaScript code inside the <head> or at the end of the <body> tag in profile.html -->
<!-- <script>
  const userEmail = document.getElementById('user-email');
  const email = '<%= email %>'; // This is a placeholder for the user's email passed from the server
  userEmail.textContent = email;
</script> -->
<script>
  const orderDates = document.querySelectorAll("time")
  orderDates.forEach((date) => {
    // Input date string
const inputDateString = `${date.innerHTML}`;

// Create a Date object from the input string
const dateObject = new Date(inputDateString);

// Extract date components
const day = dateObject.getDate();
const month = dateObject.getMonth() + 1; // Months are zero-based, so add 1
const year = dateObject.getFullYear();
const hours = dateObject.getHours();
const minutes = dateObject.getMinutes();
const seconds = dateObject.getSeconds();

// Create the desired format string
const formattedDateString = `${day.toString().padStart(2, '0')}.${month.toString().padStart(2, '0')}.${year} ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

date.innerHTML = `${formattedDateString}`

  })
</script>
</body>
</html>
